{"ast":null,"code":"import { createSelector } from 'reselect';\nimport { selectUnfilteredCartesianItems } from './axisSelectors';\nimport { selectBarRectangles } from './barSelectors';\nvar pickStackId = (state, stackId) => stackId;\nvar pickIsPanorama = (state, stackId, isPanorama) => isPanorama;\nexport var selectAllBarsInStack = createSelector([pickStackId, selectUnfilteredCartesianItems, pickIsPanorama], (stackId, allItems, isPanorama) => {\n  return allItems.filter(i => i.type === 'bar').filter(i => i.stackId === stackId).filter(i => i.isPanorama === isPanorama).filter(i => !i.hide);\n});\nvar selectAllBarIdsInStack = createSelector([selectAllBarsInStack], allBars => {\n  return allBars.map(bar => bar.id);\n});\n/**\n * Takes two rectangles and returns a new rectangle that encompasses both.\n * It takes the minimum x and y, and the maximum width and height.\n * It handles overlapping rectangles, and rectangles with a gap between them.\n * @param rect1\n * @param rect2\n */\nexport var expandRectangle = (rect1, rect2) => {\n  if (!rect1) {\n    return rect2;\n  }\n  if (!rect2) {\n    return rect1;\n  }\n  var x = Math.min(rect1.x, rect2.x);\n  var y = Math.min(rect1.y, rect2.y);\n  var maxX = Math.max(rect1.x + rect1.width, rect2.x + rect2.width);\n  var maxY = Math.max(rect1.y + rect1.height, rect2.y + rect2.height);\n  var width = maxX - x;\n  var height = maxY - y;\n  return {\n    x,\n    y,\n    width,\n    height\n  };\n};\nvar combineStackRects = (state, stackId, isPanorama) => {\n  var allBarIds = selectAllBarIdsInStack(state, stackId, isPanorama);\n  var stackRects = [];\n  allBarIds.forEach(barId => {\n    var rectangles = selectBarRectangles(state, barId, isPanorama, undefined);\n    rectangles === null || rectangles === void 0 || rectangles.forEach((rect, index) => {\n      stackRects[index] = expandRectangle(stackRects[index], rect);\n    });\n  });\n  return stackRects;\n};\nexport var selectStackRects = createSelector([state => state, pickStackId, pickIsPanorama], combineStackRects);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}