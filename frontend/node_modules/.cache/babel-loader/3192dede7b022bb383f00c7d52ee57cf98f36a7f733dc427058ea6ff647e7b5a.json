{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import api from'../services/api';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth debe ser usado dentro de AuthProvider');}return context;};export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{initializeAuth();},[]);const initializeAuth=async()=>{try{// Primero obtener el token CSRF\nawait api.get('/auth/profile/');const response=await api.get('/auth/profile/');setUser(response.data);}catch(error){// Si falla, intentar obtener solo el token CSRF\ntry{await fetch('http://localhost:8000/api/auth/profile/',{credentials:'include'});}catch(csrfError){// Error silenciado al obtener CSRF token\n}setUser(null);}finally{setLoading(false);}};const checkAuthStatus=async()=>{try{const response=await api.get('/auth/profile/');setUser(response.data);}catch(error){setUser(null);}};const login=async credentials=>{// Primero obtener el token CSRF\ntry{await api.get('/auth/csrf/');}catch(error){}// Luego hacer login\nconst response=await api.post('/auth/login/',credentials);setUser(response.data.user);return response.data;};const register=async userData=>{const response=await api.post('/auth/register/',userData);setUser(response.data.user);return response.data;};const logout=async()=>{try{await api.post('/auth/logout/');}catch(error){// Error silenciado al cerrar sesiÃ³n\n}finally{setUser(null);}};const updateUser=updatedUserData=>{setUser(updatedUserData);};const value={user,login,register,logout,updateUser,loading};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}