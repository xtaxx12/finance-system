{"ast":null,"code":"var _excluded = [\"index\"];\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nfunction _objectWithoutProperties(e, t) {\n  if (null == e) return {};\n  var o,\n    r,\n    i = _objectWithoutPropertiesLoose(e, t);\n  if (Object.getOwnPropertySymbols) {\n    var n = Object.getOwnPropertySymbols(e);\n    for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]);\n  }\n  return i;\n}\nfunction _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nimport * as React from 'react';\nimport { createContext, useContext, useMemo } from 'react';\nimport { getNormalizedStackId } from '../util/ChartUtils';\nimport { useUniqueId } from '../util/useUniqueId';\nimport { resolveDefaultProps } from '../util/resolveDefaultProps';\nimport { useAppSelector } from '../state/hooks';\nimport { selectStackRects } from '../state/selectors/barStackSelectors';\nimport { useIsPanorama } from '../context/PanoramaContext';\nimport { Layer } from '../container/Layer';\nimport { Rectangle } from '../index';\nimport { propsAreEqual } from '../util/propsAreEqual';\nvar BarStackContext = /*#__PURE__*/createContext(undefined);\n\n/**\n * Hook to resolve the stack ID for a Bar component.\n * If a stack ID is provided via props, it is used directly.\n * Otherwise, this will read stack ID from BarStack context if available.\n * If both are undefined, it returns undefined.\n * @param childStackId\n */\nexport var useStackId = childStackId => {\n  var stackSettings = useContext(BarStackContext);\n  if (stackSettings != null) {\n    return stackSettings.stackId;\n  }\n  if (childStackId == null) {\n    return undefined;\n  }\n  return getNormalizedStackId(childStackId);\n};\nexport var defaultBarStackProps = {\n  radius: 0\n};\nvar getClipPathId = (stackId, index) => {\n  return \"recharts-bar-stack-clip-path-\".concat(stackId, \"-\").concat(index);\n};\nexport var useBarStackClipPathUrl = index => {\n  var barStackContext = useContext(BarStackContext);\n  if (barStackContext == null) {\n    return undefined;\n  }\n  var {\n    stackId\n  } = barStackContext;\n  return \"url(#\".concat(getClipPathId(stackId, index), \")\");\n};\nexport var BarStackClipLayer = _ref => {\n  var {\n      index\n    } = _ref,\n    rest = _objectWithoutProperties(_ref, _excluded);\n  var clipPathUrl = useBarStackClipPathUrl(index);\n  return /*#__PURE__*/React.createElement(Layer, _extends({\n    className: \"recharts-bar-stack-layer\",\n    clipPath: clipPathUrl\n  }, rest));\n};\n\n/**\n * This React component will render a clipPath that the individual bars in the stack will reference\n * to achieve rounded corners for the entire stack.\n */\nvar BarStackClipPath = _ref2 => {\n  var {\n    stackId,\n    radius\n  } = _ref2;\n  var isPanorama = useIsPanorama();\n  var positions = useAppSelector(state => selectStackRects(state, stackId, isPanorama));\n  if (positions == null || positions.length === 0) {\n    return null;\n  }\n  /*\n   * Render one clipPath per rectangle in the stack.\n   * Each rectangle corresponds to one data entry in the chart.\n   */\n  return /*#__PURE__*/React.createElement(\"defs\", null, positions.map((pos, index) => {\n    if (pos == null) {\n      return null;\n    }\n    var clipPathId = getClipPathId(stackId, index);\n    return /*#__PURE__*/React.createElement(\"clipPath\", {\n      key: clipPathId,\n      id: clipPathId\n    }, /*#__PURE__*/React.createElement(Rectangle, {\n      isAnimationActive: false,\n      isUpdateAnimationActive: false,\n      x: pos.x,\n      y: pos.y,\n      width: pos.width,\n      height: pos.height,\n      radius: radius\n    }));\n  }));\n};\nvar BarStackImpl = props => {\n  var resolvedStackId = useUniqueId('recharts-bar-stack', getNormalizedStackId(props.stackId));\n  var {\n    children,\n    radius\n  } = resolveDefaultProps(props, defaultBarStackProps);\n  var context = useMemo(() => ({\n    stackId: resolvedStackId,\n    radius\n  }), [resolvedStackId, radius]);\n  return /*#__PURE__*/React.createElement(BarStackContext.Provider, {\n    value: context\n  }, /*#__PURE__*/React.createElement(BarStackClipPath, {\n    stackId: resolvedStackId,\n    radius: radius\n  }), children);\n};\n\n/**\n * @provides BarStackContext\n * @since 3.6\n */\nexport var BarStack = /*#__PURE__*/React.memo(BarStackImpl, propsAreEqual);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}